import{u as f,b as g,r as m,j as e,L as N,a as y}from"./index-gXC0nR9t.js";import{I as o}from"./indian-rupee-JJPvxMey.js";function k(){const{cart:x,inc:p,dec:h,clear:u,total:t,countTypes:b}=f(),{user:i}=g(),[r,l]=m.useState(!1),[c,n]=m.useState(!1),d=Object.values(x),j=async()=>{l(!0),await y.post("/orders",{user_id:i.id,customer_email:i.email,total:t,items:d.map(({product:s,qty:a})=>({product_id:s.id,qty:a,price:s.price,name:s.name}))}),u(),l(!1),n(!0)};return b===0&&!c?e.jsx("p",{className:"p-8 text-center",children:"Cart is empty."}):e.jsxs("div",{className:"relative mx-auto max-w-4xl space-y-4 p-4",children:[c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"animate-pop rounded-lg bg-white p-6 text-center shadow-lg max-w-sm w-full",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-700",children:"ðŸŽ‰ Order Placed!"}),e.jsx("p",{className:"mb-4",children:"Your request has been received. You will be contacted soon."}),e.jsx("button",{onClick:()=>n(!1),className:"rounded bg-primary-600 px-4 py-2 text-white hover:bg-primary-700 transition",children:"Okay"})]})}),e.jsx("div",{children:e.jsx(N,{to:"/",className:"rounded bg-primary-100 px-3 py-1 text-sm hover:bg-primary-200",children:"âŸµ Home"})}),d.map(({product:s,qty:a})=>e.jsxs("div",{className:"flex gap-4 border-b pb-3",children:[e.jsx("img",{src:s.photo_url,alt:s.name,className:"h-24 w-24 rounded object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(o,{className:"h-4 w-4"}),s.price]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(s.id),className:"rounded border px-2",children:"â€“"}),e.jsx("span",{children:a}),e.jsx("button",{onClick:()=>p(s.id),className:"rounded border px-2",children:"+"})]})]})]},s.id)),e.jsxs("div",{className:"text-right text-lg font-bold",children:["Total:Â ",e.jsx(o,{className:"inline h-4 w-4"}),t]}),e.jsx("button",{disabled:r,onClick:j,className:"float-right rounded bg-primary-600 px-6 py-2 text-white disabled:opacity-50",children:r?"Placingâ€¦":"Place Order"})]})}export{k as default};
